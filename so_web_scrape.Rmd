---
title: "so_web_scrape"
author: "Santiago Torres"
date: "10/12/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(jsonlite)
```

# PoC


```{r one-page-to-skills}
json_path <- str_c(getwd(), "/job_info.json")

so_df <- read_html("https://stackoverflow.com/jobs/537934/data-scientist-performance-media-horizon-media")
scripts <- so_df %>% html_elements("script")
job <- scripts[5]

job_info <- job %>% html_text2() %>% parse_json()

title <- job_info$title
skills <- unlist(job_info$skills)
description <- job_details$description
state <- job_details$jobLocation %>% .[[1]] %>% .$address %>% .$addressRegion
employment_type <- job_details$employmentType
company_name <-job_details$hiringOrganization$name
company_url <- job_details$hiringOrganization$sameAs
min_salary <- job_details$baseSalary$value$maxValue

paste(title, state, employment_type, company_name, company_url, min_salary)
paste(skills)
paste(description)
write_json(job_info, json_path)
```